"use strict";const e=require("../../common/vendor.js"),t=require("../../services/index.js"),a={__name:"index",setup(a){const o=e.ref(""),s=e.ref([]);e.ref();const l=e.ref(!1),u=e.ref("发送"),i=()=>{o.value&&(s.value.push({type:"user",value:o.value}),u.value="等待",l.value=!0,e.index.showLoading({title:"等待回复"}),t.saveList(s.value),e.index.request({url:"https://api.openai.com/v1/completions",method:"POST",header:{"Content-Type":"application/json",Authorization:"Bearer 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"},data:{model:"text-davinci-003",prompt:o.value,max_tokens:2e3,temperature:.5,top_p:1,n:1,stream:!1,logprobs:null},success:a=>{e.index.hideLoading(),console.log(a),200===a.statusCode?(s.value.push({type:"chat",value:a.data.choices[0].text}),t.saveList(s.value),l.value=!1,u.value="发送",o.value=""):(setTimeout((()=>{e.index.showToast({title:"发送请求失败请重试"})}),1e3),o.value="")}}))},n=a=>{e.index.showModal({title:"有删除弹窗",content:"你确定要删除吗",success:o=>{o.confirm?(s.value.splice(a,1),t.saveList(s.value),e.index.showToast({title:"删除成功"})):e.index.showToast({title:"取消删除"})}})},v=()=>{e.index.showModal({title:"有清空弹窗",content:"你确定要清空吗",success:a=>{a.confirm?(s.value=[],t.saveList(s.value),e.index.showToast({title:"清空成功"})):e.index.showToast({title:"取消清空"})}})};return e.onMounted((()=>{s.value=t.getList()})),(t,a)=>e.e({a:s.value.length<1},(s.value.length,{}),{b:e.f(s.value,((t,a,o)=>e.e({a:"user"===t.type},"user"===t.type?{b:e.t(t.value),c:e.o((e=>n(a)),a)}:{d:e.o((e=>n(a)),a),e:e.t(t.value),f:e.o((a=>{return o=t.value,void e.index.setClipboardData({data:o});var o}),a)},{g:a}))),c:e.o(i),d:o.value,e:e.o((e=>o.value=e.detail.value)),f:e.t(u.value),g:e.o(i),h:l.value,i:e.o(v)})}},o=e._export_sfc(a,[["__scopeId","data-v-c86f3896"]]);wx.createPage(o);
